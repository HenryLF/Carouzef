"use strict";var T=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var B=(e,t)=>{for(var n in t)T(e,n,{get:t[n],enumerable:!0})},_=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Y(t))!$.call(e,o)&&o!==n&&T(e,o,{get:()=>t[o],enumerable:!(r=W(t,o))||r.enumerable});return e};var j=e=>_(T({},"__esModule",{value:!0}),e);var te={};B(te,{Carouzef:()=>Z,useCarouzef:()=>F,useCarouzefItem:()=>G});module.exports=j(te);var D=require("react"),i=require("react");var c=require("react");function A(e,t,n,r){return r?(n+e+t)%n:Math.max(Math.min(t+e,n-1),0)}function S(e,t,n){return n?(e+t)%t:Math.min(t-1,Math.max(0,e))}function z(e,t,n,r){if(!r)return e-t;let o=e-t,a=o>0?o-n:o+n;return Math.abs(o)<Math.abs(a)?o:a}function N(e,t){let n={activeChilds:[],inactiveChilds:[]};return c.Children.forEach(e,r=>{if((0,c.isValidElement)(r)){let{className:o}=r.props;o?.includes(t)?n.inactiveChilds.push(r):n.activeChilds.push(r)}}),n}function k(e,t){let n=c.Children.count(e);if(!n)return[];let r=c.Children.toArray(e),o=Math.max(t*2,3);for(;r.length<=o;)r=[...r,...r.slice(0,n)];return r}function O(e,t){return e===0?"active":e===-1?"prev":e===1?"next":Math.abs(e)>t/2+1?"hidden":e<0?"before":"after"}function q(e,t){let n=!1;return function(...r){let o=this;n||(e.apply(o,r),n=!0,setTimeout(()=>n=!1,t))}}function M({onSwipeLeft:e,onSwipeRight:t,onSwipeUp:n,onSwipeDown:r,onKeysUp:o,swipeThreshold:a,keyboardEventThrottle:v}){let m=(0,c.useRef)(null),l=(0,c.useRef)(null),d=a,f=u=>{for(let b in o)u.key==b&&o[b]()};return(0,c.useEffect)(()=>{let u=q(f,v);return window.addEventListener("keyup",u),()=>window.removeEventListener("keyup",u)},[]),{onTouchStart:u=>{l.current=u.nativeEvent.targetTouches[0],m.current=u.nativeEvent.targetTouches[0]},onTouchMove:u=>l.current=u.nativeEvent.targetTouches[0],onTouchEnd:()=>{if(!m.current||!l.current)return;let u=l.current.clientX-m.current.clientX,b=l.current.clientY-m.current.clientY;u>d&&t(),u<-d&&e(),b>d&&r(),b<-d&&n()}}}var C=require("react/jsx-runtime"),V=(0,i.createContext)(null);function F(){return(0,i.useContext)(V)}var U=(0,i.createContext)(null);function G(){return(0,i.useContext)(U)}function J(e,{type:t,arg:n}){let r;switch(t){case"increment_index":return r=A(e.index,n,e.numberOfItems,e.loop),{...e,index:r};case"set_index":return r=S(n,e.numberOfItems,e.loop),{...e,index:r};default:return e}}var Q={interval:3e3,step:1,stopOnHover:!0};function Z({children:e,startingItem:t=0,itemsPerView:n=2,loop:r=!0,autoPlay:o,cssStyle:a,changeItemOnClick:v=!0,swipeThreshold:m=50,keyboardEventThrottle:l=500,keyboardNavigation:d={ArrowLeft:"previous",ArrowRight:"next"},axis:f="horizontal"}){let[E,w,R]=(0,i.useMemo)(()=>{let{activeChilds:s,inactiveChilds:h}=N(e,"carousel-ignore");return[r?k(s,n):s,s,h]},[e,n,r]),u=i.Children.count(E),b={index:S(t,u,r),itemsPerView:n,numberOfItems:u,realNumberOfItems:w.length,loop:r},x={...Q};if(o)switch(typeof o){case"number":x.interval=o;break;case"boolean":break;default:Object.assign(x,o)}let L={"--items-per-view":n,...a},H=(0,i.useCallback)(s=>P({type:"set_index",arg:s}),[]),p=(0,i.useCallback)(s=>P({type:"increment_index",arg:s}),[]),[K,P]=(0,i.useReducer)(J,b),g=(0,D.useRef)(!1),I=f=="vertical",y={};for(let s in d)d[s]=="next"?y[s]=()=>p(1):y[s]=()=>p(-1);let X=M({onSwipeLeft:I?()=>{}:()=>p(1),onSwipeRight:I?()=>{}:()=>p(-1),onSwipeUp:I?()=>p(1):()=>{},onSwipeDown:I?()=>p(-1):()=>{},onKeysUp:y,swipeThreshold:m,keyboardEventThrottle:l});return(0,i.useEffect)(()=>{let s=[()=>{}];if(o&&x){let h=setInterval(()=>{x.step&&!g.current&&p(1)},x.interval);s.push(()=>{clearInterval(h)})}return()=>s.forEach(h=>h())},[o]),(0,C.jsx)("div",{className:"carousel-wrapper",children:(0,C.jsxs)(V.Provider,{value:{setIndex:H,incrementIndex:p,...K},children:[(0,C.jsx)("div",{style:L,...X,onMouseEnter:()=>g.current=!0,onMouseLeave:()=>g.current=!1,className:"carousel-container",children:i.Children.map(E,(s,h)=>(0,C.jsx)(ee,{index:h,changeItemOnClick:v,axis:f,children:s},h))}),R]})})}function ee({children:e,index:t,changeItemOnClick:n,axis:r}){let o=F();if(!o)return e;let a=z(t,o.index,o.numberOfItems,o.loop),v={};r=="horizontal"?v.height="auto":v.width="auto";let m={"--item-index":`${t}`,"--distance-to-active":`${a}`,...v};if((0,i.isValidElement)(e)){let f=e.props.cssStyle;f&&Object.assign(m,f)}let l=O(a,o.itemsPerView);return(0,C.jsx)("div",{onClickCapture:n?f=>{t!=o?.index&&(f.stopPropagation(),f.preventDefault(),o.setIndex(t))}:()=>{},className:`carousel-item carousel-item-${l}`,style:m,children:(0,C.jsx)(U.Provider,{value:{index:t,activeIndex:o?.index,toActiveIndex:a,position:l},children:e})})}0&&(module.exports={Carouzef,useCarouzef,useCarouzefItem});
