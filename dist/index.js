"use strict";var y=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var W=Object.prototype.hasOwnProperty;var Y=(e,t)=>{for(var n in t)y(e,n,{get:t[n],enumerable:!0})},$=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of H(t))!W.call(e,o)&&o!==n&&y(e,o,{get:()=>t[o],enumerable:!(r=X(t,o))||r.enumerable});return e};var B=e=>$(y({},"__esModule",{value:!0}),e);var Z={};Y(Z,{Carouzef:()=>J,useCarouzef:()=>V,useCarouzefItem:()=>j});module.exports=B(Z);var i=require("react");var c=require("react");function z(e,t,n,r){return r?(n+e+t)%n:Math.max(Math.min(t+e,n-1),0)}function T(e,t,n){return n?(e+t)%t:Math.min(t-1,Math.max(0,e))}function A(e,t,n,r){if(!r)return e-t;let o=e-t,a=o>0?o-n:o+n;return Math.abs(o)<Math.abs(a)?o:a}function N(e,t){let n={activeChilds:[],inactiveChilds:[]};return c.Children.forEach(e,r=>{if((0,c.isValidElement)(r)){let{className:o}=r.props;o?.includes(t)?n.inactiveChilds.push(r):n.activeChilds.push(r)}}),n}function k(e,t){let n=c.Children.count(e);if(!n)return[];let r=c.Children.toArray(e),o=Math.max(t*2,3);for(;r.length<o;)r=[...r,...r.slice(0,n)];return r}function O(e,t){return e===0?"active":e===-1?"prev":e===1?"next":Math.abs(e)>t/2+1?"hidden":e<0?"before":"after"}function _(e,t){let n=!1;return function(...r){let o=this;n||(e.apply(o,r),n=!0,setTimeout(()=>n=!1,t))}}function M({onSwipeLeft:e,onSwipeRight:t,onSwipeUp:n,onSwipeDown:r,onKeysUp:o,swipeThreshold:a,keyboardEventThrottle:C}){let f=(0,c.useRef)(null),l=(0,c.useRef)(null),d=a,m=s=>{for(let v in o)s.key==v&&o[v]()};return(0,c.useEffect)(()=>{let s=_(m,C);return window.addEventListener("keyup",s),()=>window.removeEventListener("keyup",s)},[]),{onTouchStart:s=>{l.current=s.nativeEvent.targetTouches[0],f.current=s.nativeEvent.targetTouches[0]},onTouchMove:s=>l.current=s.nativeEvent.targetTouches[0],onTouchEnd:()=>{if(!f.current||!l.current)return;let s=l.current.clientX-f.current.clientX,v=l.current.clientY-f.current.clientY;s>d&&t(),s<-d&&e(),v>d&&r(),v<-d&&n()}}}var b=require("react/jsx-runtime"),D=(0,i.createContext)(null);function V(){return(0,i.useContext)(D)}var F=(0,i.createContext)(null);function j(){return(0,i.useContext)(F)}function q(e,{type:t,arg:n}){let r;switch(t){case"increment_index":return r=z(e.index,n,e.numberOfItems,e.loop),{...e,index:r};case"set_index":return r=T(n,e.numberOfItems,e.loop),{...e,index:r};default:return e}}var G={interval:3e3,step:1};function J({children:e,startingItem:t=0,itemsPerView:n=2,loop:r=!0,autoPlay:o,cssStyle:a,changeItemOnClick:C=!0,swipeThreshold:f=50,keyboardEventThrottle:l=500,keyboardNavigation:d={ArrowLeft:"previous",ArrowRight:"next"},axis:m="horizontal"}){let[E,S,w]=(0,i.useMemo)(()=>{let{activeChilds:u,inactiveChilds:h}=N(e,"carouzef-ignore");return[k(u,n),u,h]},[e,n]),s=i.Children.count(E),v={index:T(t,s,r),itemsPerView:n,numberOfItems:s,realNumberOfItems:S.length,loop:r},x={...G};if(o)switch(typeof o){case"number":x.interval=o;break;case"boolean":break;default:Object.assign(x,o)}let R={"--items-per-view":n,...a};console.log(R);let U=(0,i.useCallback)(u=>P({type:"set_index",arg:u}),[]),p=(0,i.useCallback)(u=>P({type:"increment_index",arg:u}),[]),[K,P]=(0,i.useReducer)(q,v),I=m=="vertical",g={};for(let u in d)d[u]=="next"?g[u]=()=>p(1):g[u]=()=>p(-1);let L=M({onSwipeLeft:I?()=>{}:()=>p(1),onSwipeRight:I?()=>{}:()=>p(-1),onSwipeUp:I?()=>p(1):()=>{},onSwipeDown:I?()=>p(-1):()=>{},onKeysUp:g,swipeThreshold:f,keyboardEventThrottle:l});return(0,i.useEffect)(()=>{let u=[()=>{}];if(o&&x){let h=setInterval(()=>p(1),x.interval);u.push(()=>{clearInterval(h)})}return()=>u.forEach(h=>h())},[o]),(0,b.jsx)("div",{style:R,...L,className:"carousel-container",children:(0,b.jsxs)(D.Provider,{value:{setIndex:U,incrementIndex:p,...K},children:[i.Children.map(E,(u,h)=>(0,b.jsx)(Q,{index:h,changeItemOnClick:C,axis:m,children:u},h)),w]})})}function Q({children:e,index:t,changeItemOnClick:n,axis:r}){let o=V();if(!o)return e;let a=A(t,o.index,o.numberOfItems,o.loop),C={};r=="horizontal"?C.height="auto":C.width="auto";let f={"--item-index":`${t}`,"--distance-to-active":`${a}`,...C};if((0,i.isValidElement)(e)){let m=e.props.cssStyle;m&&Object.assign(f,m)}let l=O(a,o.itemsPerView);return(0,b.jsx)("div",{onClickCapture:n?m=>{t!=o?.index&&(m.stopPropagation(),m.preventDefault(),o.setIndex(t))}:()=>{},className:`carousel-item carousel-item-${l}`,style:f,children:(0,b.jsx)(F.Provider,{value:{index:t,activeIndex:o?.index,toActiveIndex:a,position:l},children:e})})}0&&(module.exports={Carouzef,useCarouzef,useCarouzefItem});
